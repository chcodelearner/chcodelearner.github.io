<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>hexo 相关操作</title>
    <url>/2021/08/21/hexo%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h1><h2 id="1、安装node-js"><a href="#1、安装node-js" class="headerlink" title="1、安装node.js"></a>1、安装node.js</h2><p>node.js官网：<a href="https://nodejs.org/zh-cn/">https://nodejs.org/zh-cn/</a></p>
<h2 id="2、全局安装cnpm"><a href="#2、全局安装cnpm" class="headerlink" title="2、全局安装cnpm"></a>2、全局安装cnpm</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g cnpm --registry=http://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<p>Win10 需要管理员打开 PowerShell</p>
<p>将cnpm添加到系统变量，cmd窗口输入cnpm -v 出现版本号，即安装成功</p>
<h2 id="3、安装hexo-cli"><a href="#3、安装hexo-cli" class="headerlink" title="3、安装hexo-cli"></a>3、安装hexo-cli</h2><p>Win10 需要管理员打开 PowerShell，执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cnpm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<p>如果出现cnpm : 无法加载文件D:\nodejs\node_global\cnpm.ps1,因为在此系统上禁止运行，执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">set-ExecutionPolicy RemoteSigned</span><br></pre></td></tr></table></figure>

<p>执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure>

<p>出现版本号，即可代表安装成功</p>
<h1 id="搭建博客"><a href="#搭建博客" class="headerlink" title="搭建博客"></a>搭建博客</h1><ol>
<li>新建空文件夹hexo，如果博客搭建出错，删掉文件夹重来就是了</li>
<li>在文件夹下，执行 hexo init 命令初始化</li>
<li>执行 hexo s 启动博客</li>
<li>访问 <a href="http://localhost:4000/">http://localhost:4000/</a> 出现页面即代表成功</li>
</ol>
<h1 id="写文章"><a href="#写文章" class="headerlink" title="写文章"></a>写文章</h1><p>执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new <span class="string">&quot;文章名&quot;</span></span><br></pre></td></tr></table></figure>

<p>就会在hexo/source/_posts 目录下生成对应的md文件</p>
<p>再执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>

<h1 id="推送到gitee上"><a href="#推送到gitee上" class="headerlink" title="推送到gitee上"></a>推送到gitee上</h1><p>1、在gitee上新建仓库，仓库名必须是昵称.gitee.io</p>
<p>2、安装git部署工具</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cnpm install --save hexo-deployer-git</span><br></pre></td></tr></table></figure>

<p>3、编辑_config.yml文件</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://gitee.com/chenhaodabai/relieved.gitee.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>

<p>4、执行</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>5、访问  <a href="https://chcodelearner.github.io/">https://chcodelearner.github.io/</a>  </p>
<h1 id="切换主题"><a href="#切换主题" class="headerlink" title="切换主题"></a>切换主题</h1><p>hexo目录下，执行</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/Shen-Yu/hexo-theme-ayer.git themes/ayer</span><br></pre></td></tr></table></figure>

<p>编辑_config.yml，theme: ayer</p>
<h1 id="安装搜索插件"><a href="#安装搜索插件" class="headerlink" title="安装搜索插件"></a>安装搜索插件</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb</span><br></pre></td></tr></table></figure>

<h1 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h1><h3 id="创建一篇新博客"><a href="#创建一篇新博客" class="headerlink" title="创建一篇新博客"></a>创建一篇新博客</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="启动服务器"><a href="#启动服务器" class="headerlink" title="启动服务器"></a>启动服务器</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<h3 id="生成静态文件"><a href="#生成静态文件" class="headerlink" title="生成静态文件"></a>生成静态文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<h3 id="推送到远端"><a href="#推送到远端" class="headerlink" title="推送到远端"></a>推送到远端</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>ElasticSearch</title>
    <url>/2021/08/19/ElasticSearch/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ElasticSearch7-2-0"><a href="#ElasticSearch7-2-0" class="headerlink" title="ElasticSearch7.2.0"></a>ElasticSearch7.2.0</h1><h1 id="正排索引与倒排索引"><a href="#正排索引与倒排索引" class="headerlink" title="正排索引与倒排索引"></a>正排索引与倒排索引</h1><h2 id="正排索引"><a href="#正排索引" class="headerlink" title="正排索引"></a>正排索引</h2><p>id    name</p>
<p>1     my name is chen hao<br>2     my name is li si</p>
<p>以id为主键，建立索引，但在查询内容是不好，比如查询Chenhao、</p>
<h2 id="倒排索引"><a href="#倒排索引" class="headerlink" title="倒排索引"></a>倒排索引</h2><p>keyword      id</p>
<p>my               1,2<br>name           1,2<br>is                  1,2<br>chen             1<br>hao              1<br>li                   2</p>
<p>先通过关键字，找到主键，再通过主键找到内容</p>
<h1 id="索引操作"><a href="#索引操作" class="headerlink" title="索引操作"></a>索引操作</h1><p>Get    <a href="http://192.168.130.144:9202/pm_perf_data_companymin">http://192.168.130.144:9202/pm_perf_data_companymin</a>   获取索引信息</p>
<p>Put    <a href="http://192.168.130.144:9202/pm_perf_data_companymin">http://192.168.130.144:9202/pm_perf_data_companymin</a>   新增索引（Put具有幂等性）</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;number_of_shards&quot;</span>: <span class="number">3</span>,   <span class="comment">//分片数，默认为5</span></span><br><span class="line">		<span class="attr">&quot;number_of_replicas&quot;</span>: <span class="number">2</span>  <span class="comment">//副本数，默认为1</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">&quot;mapping&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;_doc&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line">				<span class="attr">&quot;commodity_id&quot;</span>: &#123;</span><br><span class="line">					<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">				&#125;,</span><br><span class="line">				<span class="attr">&quot;commodity_name&quot;</span>: &#123;</span><br><span class="line">					<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span></span><br><span class="line">				&#125;,</span><br><span class="line">				<span class="attr">&quot;picture_url&quot;</span>: &#123;</span><br><span class="line">					<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span></span><br><span class="line">				&#125;,</span><br><span class="line">				<span class="attr">&quot;price&quot;</span>: &#123;</span><br><span class="line">					<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;double&quot;</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Delete   <a href="http://192.168.130.144:9202/pm_perf_data_companymin">http://192.168.130.144:9202/pm_perf_data_companymin</a>   删除索引</p>
<p>Get   <a href="http://192.168.130.144:9202/_cat/indices?v">http://192.168.130.144:9202/_cat/indices?v</a>   查询全部索引信息</p>
<h1 id="文档操作"><a href="#文档操作" class="headerlink" title="文档操作"></a>文档操作</h1><h2 id="新增数据"><a href="#新增数据" class="headerlink" title="新增数据"></a>新增数据</h2><p>Post    <a href="http://192.168.130.144:9202/pm_perf_data_companymin/_doc">http://192.168.130.144:9202/pm_perf_data_companymin/_doc</a></p>
<p>数据格式为Json格式</p>
<p>Post    <a href="http://192.168.130.144:9202/pm_perf_data_companymin/_doc/%7Bid%7D">http://192.168.130.144:9202/pm_perf_data_companymin/_doc/{id}</a>    指定id</p>
<p>可以把doc改为create</p>
<h2 id="主键查询"><a href="#主键查询" class="headerlink" title="主键查询"></a>主键查询</h2><p>Get    <a href="http://192.168.130.144:9202/pm_perf_data_companymin/_doc/%7Bid%7D">http://192.168.130.144:9202/pm_perf_data_companymin/_doc/{id}</a></p>
<h2 id="全查询"><a href="#全查询" class="headerlink" title="全查询"></a>全查询</h2><p>Get    <a href="http://192.168.130.144:9202/pm_perf_data_companymin/_search">http://192.168.130.144:9202/pm_perf_data_companymin/_search</a></p>
<h2 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h2><p>POST   <a href="http://192.168.130.144:9202/%7Bindex%7D/_update/%7Bid%7D">http://192.168.130.144:9202/{index}/_update/{id}</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;doc&quot;</span>: &#123;</span><br><span class="line">	     <span class="attr">&quot;k_RESID&quot;</span>: <span class="string">&quot;9b473321-093d-4274-8ad8-840db65394c5&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="query：查询条件：Json格式"><a href="#query：查询条件：Json格式" class="headerlink" title="query：查询条件：Json格式"></a>query：查询条件：Json格式</h1><h2 id="bool用来合并多个查询条件"><a href="#bool用来合并多个查询条件" class="headerlink" title="bool用来合并多个查询条件"></a>bool用来合并多个查询条件</h2><p>包含四个子句</p>
<h3 id="must：满足全部条件，并参与计算分值，and"><a href="#must：满足全部条件，并参与计算分值，and" class="headerlink" title="must：满足全部条件，并参与计算分值，and"></a>must：满足全部条件，并参与计算分值，and</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;bool&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;must&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;match&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;ITEM_CODE&quot;</span>: <span class="string">&quot;MAXPDUSESSION&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;match&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;COMPANYCODE&quot;</span>: <span class="string">&quot;HA-ZZ-HNZT&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="should：至少满足一个-or"><a href="#should：至少满足一个-or" class="headerlink" title="should：至少满足一个  or"></a>should：至少满足一个  or</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;bool&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;should&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;match&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;ITEM_CODE&quot;</span>: <span class="string">&quot;MAXPDUSESSION&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;match&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;ITEM_PARA&quot;</span>: <span class="string">&quot;-1&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="filter：和must一样，但不参与计算分值"><a href="#filter：和must一样，但不参与计算分值" class="headerlink" title="filter：和must一样，但不参与计算分值"></a>filter：和must一样，但不参与计算分值</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;bool&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;filter&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;match&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;ITEM_CODE&quot;</span>: <span class="string">&quot;MAXPDUSESSION&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;match&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;ITEM_PARA&quot;</span>: <span class="string">&quot;-1&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="must-not：必须不满足条件"><a href="#must-not：必须不满足条件" class="headerlink" title="must_not：必须不满足条件"></a>must_not：必须不满足条件</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;bool&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;must_not&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;match&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;ITEM_CODE&quot;</span>: <span class="string">&quot;MAXPDUSESSION&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;match&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;ITEM_PARA&quot;</span>: <span class="string">&quot;-1&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="单个条件语句"><a href="#单个条件语句" class="headerlink" title="单个条件语句"></a>单个条件语句</h2><ul>
<li>match_phase：会分词，但需要结果中也包含所有的分词，而且顺序要求一样</li>
<li>query_string：和match类似，但是在所有字段中搜索</li>
<li>prefix：前缀查询</li>
<li>regexp：正则查询</li>
<li>fuzzy：模糊查询<ul>
<li>fuzziness：允许的最大编辑距离，默认不开启模糊查询，相当于fuzziness=0</li>
<li>prefix_length：控制两个字符串匹配的最小相同的前缀大小，也即是前n个字符不允许编辑，必须与查询词相同</li>
<li>max_expansions</li>
<li>transpositions：将相邻位置字符互换算作一次编辑距离</li>
</ul>
</li>
</ul>
<p>GET pm_perf_data_companymin/_search</p>
<h3 id="match-all：查询全部数据"><a href="#match-all：查询全部数据" class="headerlink" title="match_all：查询全部数据"></a>match_all：查询全部数据</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="match：模糊查询，会分词"><a href="#match：模糊查询，会分词" class="headerlink" title="match：模糊查询，会分词"></a>match：模糊查询，会分词</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;match&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;ITEM_CODE&quot;</span>: <span class="string">&quot;MAXPDUSESSION&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// fuzziness开启纠错检索，默认值是2,表示最多可以纠错两次</span></span><br><span class="line"><span class="comment">// 用户在进行搜索的时候打字错误现象，搜索引擎会自动纠正，然后尝试匹配索引库中的数据</span></span><br><span class="line"><span class="comment">// operator默认是or, and表示查询满足所有条件</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;match&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;k_RESPARA&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;query&quot;</span>:<span class="string">&quot;东莞松山湖华为T园区D1-HRW&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;fuzziness&quot;</span>:<span class="string">&quot;AUTO&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;operator&quot;</span>:<span class="string">&quot;and&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="term：查询某个字段里含有某个关键词的文档，不会分词—-精确查询，"><a href="#term：查询某个字段里含有某个关键词的文档，不会分词—-精确查询，" class="headerlink" title="term：查询某个字段里含有某个关键词的文档，不会分词—-精确查询，="></a>term：查询某个字段里含有某个关键词的文档，不会分词—-精确查询，=</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;term&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;ITEM_CODE&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;value&quot;</span>: <span class="string">&quot;MAXPDUSESSION&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="terms：查询某个字段里含有多个关键词的文档，不会分词—-精确查询，in"><a href="#terms：查询某个字段里含有多个关键词的文档，不会分词—-精确查询，in" class="headerlink" title="terms：查询某个字段里含有多个关键词的文档，不会分词—-精确查询，in"></a>terms：查询某个字段里含有多个关键词的文档，不会分词—-精确查询，in</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;terms&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;ITEM_CODE&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;MAXPDUSESSION&quot;</span>,</span><br><span class="line">        <span class="string">&quot;SMF_SESS_MAX_RATE&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="range：范围查询"><a href="#range：范围查询" class="headerlink" title="range：范围查询"></a>range：范围查询</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;range&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;RECORD_TIME&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;gte&quot;</span>: <span class="string">&quot;2021-06-14 00:00:00&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;lte&quot;</span>: <span class="string">&quot;2021-06-14 00:00:00&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="wildcard：通配符查询-占位符查询"><a href="#wildcard：通配符查询-占位符查询" class="headerlink" title="wildcard：通配符查询/占位符查询"></a>wildcard：通配符查询/占位符查询</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;wildcard&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;ITEM_PARA&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;value&quot;</span>: <span class="string">&quot;*-1*&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="sort：排序规则：Json格式"><a href="#sort：排序规则：Json格式" class="headerlink" title="sort：排序规则：Json格式"></a>sort：排序规则：Json格式</h1><p>GET pm_perf_data_companymin/_search</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;sort&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;RECORD_TIME&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;order&quot;</span>: <span class="string">&quot;desc&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;FRESHTIME&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;order&quot;</span>: <span class="string">&quot;asc&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="from，size：分页查询：Json格式"><a href="#from，size：分页查询：Json格式" class="headerlink" title="from，size：分页查询：Json格式"></a>from，size：分页查询：Json格式</h1><p>GET pm_perf_data_companymin/_search</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;from&quot;</span>: <span class="number">0</span>, </span><br><span class="line">  <span class="attr">&quot;size&quot;</span>: <span class="number">20</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="source：指定返回结果字段：Json格式"><a href="#source：指定返回结果字段：Json格式" class="headerlink" title="_source：指定返回结果字段：Json格式"></a>_source：指定返回结果字段：Json格式</h1><p>GET pm_perf_data_companymin/_search</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;_source&quot;</span>: [<span class="string">&quot;COMPANYCODE&quot;</span>, <span class="string">&quot;VALUE&quot;</span>], </span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="aggs：聚合规则：Json格式"><a href="#aggs：聚合规则：Json格式" class="headerlink" title="aggs：聚合规则：Json格式"></a>aggs：聚合规则：Json格式</h1><h2 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h2><p>GET pm_perf_data_companymin/_search</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;aggs&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;companycode_group&quot;</span>: &#123;   <span class="comment">// 分组名，接收结果的时候用到，随意命名</span></span><br><span class="line">      <span class="attr">&quot;terms&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;field&quot;</span>: <span class="string">&quot;COMPANYCODE&quot;</span>   <span class="comment">// 分组字段</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;size&quot;</span>:<span class="number">0</span>  <span class="comment">//不显示原始数据，只查询分组数据</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="平均值"><a href="#平均值" class="headerlink" title="平均值"></a>平均值</h2><p>GET pm_perf_data_companymin/_search</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;aggs&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;avg_value&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;avg&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;field&quot;</span>: <span class="string">&quot;VALUE&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;size&quot;</span>:<span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="求和"><a href="#求和" class="headerlink" title="求和"></a>求和</h2><p>GET pm_perf_data_companymin/_search</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;aggs&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;sum_value&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;sum&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;field&quot;</span>: <span class="string">&quot;VALUE&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;size&quot;</span>:<span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="分组后求和"><a href="#分组后求和" class="headerlink" title="分组后求和"></a>分组后求和</h2><p>GET pm_perf_data_companymin/_search</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">GET pm_perf_data_companymin/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;aggs&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;companycode_group&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;terms&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;field&quot;</span>: <span class="string">&quot;COMPANYCODE&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;aggs&quot;</span>: &#123;</span><br><span class="line">           <span class="attr">&quot;sum_value&quot;</span>: &#123;</span><br><span class="line">              <span class="attr">&quot;sum&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;field&quot;</span>: <span class="string">&quot;VALUE&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;size&quot;</span>:<span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="映射关系-mapping"><a href="#映射关系-mapping" class="headerlink" title="映射关系 mapping"></a>映射关系 mapping</h1><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;mapping&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;COMPANYCODE&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>  <span class="comment">// 分词是不能用的 要全匹配</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;FRESHTIME&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;date&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;format&quot;</span>: <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;ITEM_CODE&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>     <span class="comment">//可以被分词</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;ITEM_PARA&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;RECORD_TIME&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;date&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;format&quot;</span>: <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;VALUE&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;double&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;index&quot;</span>:fasle  <span class="comment">// 不能作为查询条件</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ElasticSearch</category>
      </categories>
      <tags>
        <tag>ElasticSearch</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2021/08/19/hello-world/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
</search>
